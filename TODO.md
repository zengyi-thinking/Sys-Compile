# Sys编译器开发进度

## 项目概述
实现一个Sys语言编译器，支持int/float类型、多维数组、函数、控制语句等特性。

## 当前状态
- [x] 项目结构搭建
- [x] 词法分析器完善（含注释支持）
- [x] 语法分析器完善（含AST节点创建）
- [x] AST构建完整实现
- [x] 测试用例编写
- [ ] 符号表管理
- [ ] 语义分析
- [ ] 中间代码生成
- [ ] 代码优化
- [ ] 目标代码生成

## 开发步骤

### 第一阶段：词法分析器 (Lexer)
- [x] 基本Token定义
- [x] 注释支持（// 和 /* */）
- [x] 数字常量识别
- [x] 标识符识别
- [x] 操作符识别
- [ ] 测试用例编写
- [ ] 边界情况处理

### 第二阶段：语法分析器 (Parser)
- [x] 语法规则框架
- [x] 完善语法规则（40+条）
- [x] AST节点创建函数
- [x] 表达式优先级
- [x] 语法错误处理
- [ ] 错误恢复机制

### 第三阶段：抽象语法树 (AST)
- [x] AST节点定义
- [x] AST打印功能
- [x] 辅助函数（二元/一元操作）
- [ ] AST访问器模式
- [ ] AST遍历和转换

### 第四阶段：语义分析
- [ ] 符号表设计
- [ ] 作用域管理
- [ ] 类型检查
- [ ] 错误报告

### 第五阶段：中间代码生成
- [ ] 三地址码设计
- [ ] TAC生成器
- [ ] 控制流处理
- [ ] 数组访问处理

### 第六阶段：代码生成
- [ ] 目标平台选择 (RISC-V/x86)
- [ ] 寄存器分配
- [ ] 指令选择
- [ ] 栈帧管理

## 测试计划
- [x] 基本类型测试（test_basic.sy）
- [x] 表达式测试（test_expr.sy）
- [x] if语句测试（test_if.sy）
- [x] while循环测试（test_while.sy）
- [x] 函数调用测试（test_func.sy）
- [x] 数组测试（test_array.sy）
- [ ] 复杂数组测试（多维数组）
- [ ] 嵌套控制流测试
- [ ] 综合测试用例
- [ ] 错误用例测试

## 参考资料
- Flex: https://westes.github.io/flex/manual/
- Bison: https://www.gnu.org/software/bison/manual/
- SysY2022语言定义文档
